由于左上角和右下角必须经过，所以可以直接把最小的两个数放在左上角和右下角。

考虑交换第一行的两个左大右小的相邻的数对答案产生的影响，显然，这只会使路径上数的总和的最大值变小或不变。第二行同理。于是我们得到了如下结论：**第一行的数从小到大排是最优的，第二行的数从大到小排是最优的。**

由于第一行 $a_{1,i}$ 递增，第二行 $a_{2,i}$ 递减，所以 $a_{1,i+1}-a_{2,i}$（可能为负）递增，所以随着拐点从左向右移动，路径上数的总和先变小再变大，所以最大权值的路径必定是在第一格向下或在最后一格向下，权值为第一行后 $n-1$ 格总和与第二行前 $n-1$ 格总和中的较大值。由于总和不变，所以我们希望两个和尽可能接近总和的一半。

令 $f(i,j,k)$ 表示能否从前 $i$ 个数中选出 $j$ 个放在第一行使得它们总和为 $k$。用 `bitset` 优化即可。而构造方案只需要从后往前逆推即可。

时间复杂度 $\Theta\left(\dfrac{n^2\sum a}w\right)$。
