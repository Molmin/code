显然每个结点只会被染色一次，而且贪心地染这个结点子树中叶子颜色的众数。

一个结点操作次数为所有子树的操作次数之和减去众数出现次数，最后加上自己本身操作的 $1$ 次。

结点上维护每个数出现的次数（`map`）、出现次数最多的数的集合以及它们出现次数。每个结点处启发式合并，把集合小的往集合大的合并即可。
