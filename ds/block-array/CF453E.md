考虑分块，对于每一块，预处理该块全部清空后经过 $j$ 个单位之间所有位置魔法值总和。

每个块记录上一次清空时间，如果只清空一部分或者是初始状态我们认为它是不清空的。每次询问对于两端的块和中间的不清空的块暴力处理，剩下的块根据预处理的数据计算，这样每次至多多出来两个不清空的块，总时间复杂度 $O(\dfrac{nv + nm}{B} + (n+m)B)$。
