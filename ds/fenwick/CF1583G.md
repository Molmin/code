注意到对于每次时光倒流，都会清除后面的所有标记，不妨令 $f(i)$ 表示在 $i$ 处时光倒流，回到 $i$ 处所需要的倒流次数。

那么 $f(i)$ 的值就是所有 $a$ 值在其之后的标记的 $f$ 值之和。用一个树状数组维护每个位置处的 $f$ 值总和即可。

考虑如何统计答案，如果要求一项任务被完成，则说明 $a,b$ 值同时比其小的任务都必须完成。

同样使用树状数组维护，时间复杂度 $\Theta(n \log n)$。
