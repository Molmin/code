考虑在排名为 $x$ 的数后面加一个数字 $y$ 后形成的数是不充分的，则新数的排名就是比它小的不充分的数的个数加 $1$，而比它小的不充分的数，要么是 $1\sim 9$，要么是由排名为 $1\sim x-1$ 的数后加一个数字形成的，要么是原数加上数字 $0\sim y-1$ 形成的。

故新数的排名为 $9+\sum\limits_{i=1}^{x-1}(i\bmod 11)+y+1$。

注意到 $1\sim x-1$ 模 $11$ 的总和不那么好求，而若我们只关心排名对 $11$ 取模的结果，总和就变得很好求，即 $\left(10+\dfrac 12x(x-1)+y\right)\bmod 11$。

考虑动态规划，记 $f(i,j)$ 表示以第 $i$ 个数字结尾的排名模 $11$ 为 $j$ 的不充分的数的个数，那么就可以用 $f(i,j)$ 去更新 $f\left[i+1,\left(10+\dfrac 12j(j-1)+s_{i+1}\right)\bmod 11\right]$（$j > s_{i+1}$）。

时间复杂度 $\Theta(11n)$。
