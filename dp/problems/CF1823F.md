首先注意到只要走到 $t$ 就停止了，所以经过 $t$ 的期望次数一定是 $1$。

下面把一条无向边 **拆成两条有向边考虑**。当到达一个点时，等概率选择走这个点的出边，所以经过每条出边的期望次数相等，且经过这个点的期望次数等于经过其出边的期望次数乘出边数量。

注意到给定的图是一棵树，若一条边 $(u,v)$ 不在 $s$ 到 $t$ 的路径上，则从 $u$ 走到 $v$ 之后还要走回来，所以经过 $u\to v$ 和 $v\to u$ 的期望次数一定相等。即经过 $u$ 和经过 $v$ 的次数相等；若 $(u,v)$ 在 $s$ 到 $t$ 的路径上，则经过 $u\to v$ 的次数一定比 $v\to u$ 大 $1$，所以经过 $u$ 的次数比经过 $v$ 的次数大 $1$。

按照上述规律动态规划即可，时间复杂度 $\Theta(n)$。
