根据题述，路径必须满足对于任意一种物品存在一条道路可以购买该物品。于是容斥原理，$\Theta(2^4)$ 枚举只能经过哪些物品。

一个状态是当前时间下到达每个点的方案数，矩阵快速幂优化递推即可。

时间复杂度 $\Theta(2^4N^3\log T)$。
