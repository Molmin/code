注意到若一个长方形的长、宽同时小于等于另一个长方形，那么可以忽略这个长方形。此时可以得到一个长递增、宽递减的长方形序列，易知把序列分割成若干连续段是最优的。

设到第 $i$ 个长方形为止的最小费用为 $dp(i)$，则 $dp(i)=\min\limits_{0\leq j < i}\left[dp(j)+l_{j+1}\cdot w_i\right]$。

斜率优化解决即可。时间复杂度 $\Theta(n\log n)$。
