为了方便地处理重复数的情况，我们认为对于相同的数，编号小的小于编号大的，这样所有数就互不相同了。

考虑维护对于每个 $i$，使得 $1,2,\cdots,i$ 这些数在它们原来所在的 $i$ 个位置上且升序排列。假设要加入一个数 $i$，把它与 $1 \sim i-1$ 形成的逆序对找出来按照位置排序，那么先与最后一项交换，此时 $i$ 交换到了最后，然后把换出来的第二大的数和倒数第二个位置交换，依次类推即可完成构造。
