首先有如下结论：每组中总和的平方和最小的分组一定满足条件。

> 证明：
> 
> 反证法，假设存在第 $i$ 段和第 $i+1$ 段总和之差大于两段中的最大值，不妨设第 $i$ 段更大，则把第 $i$ 段最右侧的数移到第 $i+1$ 段，此时两组数的平方和显然变小。
> 
> 至此产生矛盾，结论成立。

问题转化为求出分成 $k$ 组每组中总和的平方和最小的分组。WQS 二分即可解决。

时间复杂度 $O(n\log\sum a_i)$。
