首先容易想到一个错误的贪心：每次选择价格最贵的白嫖。但是这可以被第一个样例 hack。

考虑吧物品价值从大到小排序并合并相同价值的物品。假设处理到了价值为 $c$，数量为 $t$ 的物品，在当前的决策中，已经把所有价值大于 $c$ 的处理完毕（要么购买要么白嫖），用一个堆 $Q$ 维护所有白嫖的物品的价格。那么可以计算出有多少物品购买时是没有匹配白嫖的物品的，这样可以先处理掉 $t$ 个物品中的一部分。

设还需要处理 $t'$ 个物品。假设当前堆中最小的值为 $c_0$。

- 如果 $c_0 < c$，则容易发现白嫖 $c$ 比白嫖 $c_0$ 更优，并且白嫖 $c$ 后还可以多白嫖一个，于是可以一次白嫖两个 $c$。
- 如果 $c_0 \geq c$，则有两种方案：
  - 仍然白嫖 $c_0$，并买 $c$，这种情况下只需把弹出的 $c_0$ 放回去即可。
  - 买 $c_0$，并白嫖两个 $c$，这种情况下除了放回去，剩下的影响等价于一个 $2c-c_0$ 的物品，将其加入堆中即可。

时间复杂度 $O(n\log n)$。
